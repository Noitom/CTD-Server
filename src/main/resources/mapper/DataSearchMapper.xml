<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.snf.dsds.dao.DataSearchDao">

    <resultMap id="searchTypeList" type="com.snf.dsds.bean.SearchType">
        <result column="id" property="id"/>
        <result column="name" property="name"/>
        <collection property="searchParameters" javaType="List" ofType="com.snf.dsds.bean.SearchParameter" column="param_id">
            <result property="id" column="param_id"/>
            <result property="name" column="param_value"/>
            <result property="searchType" column="search_type"/>
        </collection>
    </resultMap>

    <select id="getSearchTypeList" resultMap="searchTypeList">
      select t1.id as 'param_id',t1.search_type,t1.`name` as 'param_value',t2.id ,t2.name
      from t_search_parameter t1 left join t_search_type t2 on t1.search_type = t2.id
    </select>

    <select id="querySearchParamBySearchType" resultType="com.snf.dsds.bean.SearchParameter">
      select * from t_search_parameter where search_type = #{searchType}
    </select>


</mapper>